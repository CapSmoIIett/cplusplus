std::promise<T>
Дает возможность задать значение (типа T), которое впоследствии можно будет прочитать с помощью объекта std::future<T>.
После установки значения обещания (с помощью функции-члена set_value()) будущий результат становится готовым, и его можно использовать для получения установленного значения.

Если уничтожить объект std::promise, не установив значение, то в будущем результате будет сохранено исключение. Если при вызове задачи обернутая функция возбуждает исключение, то объект исключения сохраняется в будущем результате вместо значения, и это исключение повторно возбуждается при обращении к get(). 

Чтобы сохранить исключение вместо значения, следует вызвать функцию-член set_exception(), а не set_value().

В set_exception можно передавать результаты функий:
std::current_exception(), которая возвращает последнее возбужденное исключение
std::copy_exception(), чтобы поместить в объектобещание новое исключение, которое никем не возбуждалось.

алгоритм работы с обещаниями:
 - основной поток даёт обещание.
 - получаем std::future из обещания.
 - Обещание вместе с аргументами функции перемещается в отдельный поток.
 - Новый поток выполняет функцию и выполняет обещание.
 - Исходный поток извлекает результа